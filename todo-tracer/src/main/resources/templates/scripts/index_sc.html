<script th:fragment="script">
    document.addEventListener("DOMContentLoaded", () =>{

    document
    .querySelectorAll(".submit-done")
    .forEach(x => {
        x.addEventListener("click", event => {
            event.preventDefault();

            const parantControll = x
            .parentNode
            .parentNode
            .parentNode
            .querySelector(".id");

            const url = window.location.href;
            const data = {
                "id": parseInt(parantControll.textContent),
                "status": true
            };

            const jwt = sessionStorage.getItem('jwt');

            fetch(url, {

                method: 'PUT',

                headers: {

                    'Authorization': `Bearer ${jwt}`,
                    'Content-Type': 'application/json'

                },

                body: JSON.stringify(data)

            })
                .then(response => response.json())
                .then(data => window.location.reload())
                .catch(error => console.log(error));
        });
    });
});
</script>